# 浅析跨域

### 什么叫做跨域？
- 跨域又称为非同源策略请求
只要不满足同协议，同域名，同端口就是属于非同源策略，跨域就是进行非同源策略请求。

- 同源策略
由Netscape公司1995年引入浏览器，它是浏览器最核心也最基本的安全功能，如果缺少了同源策略，浏览器很容易受到XSS、CSFR等攻击。常见的ajax就属于同源策略请求。


### 为什么需要进行跨域？
在以前的开发中，前后端代码是部署到同一台服务器上，是不属于跨域的。
但在现在的开发中，由于要做服务器性能优化，会将服务器进行拆分，拆分如下：
web服务器：静态资源
图片服务器
data服务器：业务逻辑，数据分析（对数据库的操作）  后端

*** 在开发中会经常涉及到跨域的问题 ***

### 跨域的解决方案：

1. JSONP
图解jsonp：


实现原理文字描述：
- 既然要跨域，那可以利用script标签的src请求资源不受同源策略的限制
- 创建一个script的标签，并且定义一个 function func( data ) {  doSomething }
- 将func 通过src 发送给到服务器 http://localhost:8000?callback=func(假如这地址是服务器地址)
- 服务器这边可以拿到get的请求过来的数据 callback = func
- 准备需要传递给前端的数据，在通过json字符串传递给到前端 res.send( JSON.stringify(func(需要传递的数据)) )
- 前端接受服务器的响应之后，json字符串会被浏览器解析并执行 func(data) 的函数调用


总结： 
- jsonp只能使用get请求
- 如果响应被拦截，不安全
- 需要服务器的支持

2. CORS 跨域源资源共享 (主流) 需要服务器支持

- 前端发送axios请求

- 服务器端设置 运行访问的 源地址； 也可以为* ，允许所有的访问。


3. 反向代理Nginx (后端实现)